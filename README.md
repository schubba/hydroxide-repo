# Hydroxide Debian & RPM Repository

Automated DEB/RPM repository for Hydroxide (Proton Mail Bridge CLI). Provides easy installation and updates for K-9 Mail users and Linux enthusiasts.

## Why this repository?
Official Proton Mail Bridge packages can be difficult to manage via standard package managers. This project bridges that gap by providing:
- **Automation**: Nightly builds ensure you are always close to the latest upstream changes.
- **Clean Integration**: Uses `apt` or `dnf` for seamless updates instead of manual `.deb` downloads.
- **Transparency**: Built via public GitHub Actions directly from the official Hydroxide source.
- **Security**: All packages are digitally signed via GPG for your safety.

## Installation

### Debian / Ubuntu / Mint / Pop!_OS
Run the following command to automatically add the repository and its GPG signing key:
```bash
curl -1sLf "https://dl.cloudsmith.io/public/opensource-89f5/hydroxide/setup.deb.sh" | sudo -E bash
sudo apt update && sudo apt install hydroxide
```

### Fedora / RHEL / CentOS / AlmaLinux
Run the following command to set up the RPM repository:

```bash
curl -1sLf "https://dl.cloudsmith.io/public/opensource-89f5/hydroxide/setup.rpm.sh" | sudo -E bash
sudo dnf install hydroxide
```

## Quick Start
After installation, you can authorize your account and start the bridge:

- Login: hydroxide auth <your-proton-username>

- Start Service: hydroxide serve

- Configure Client: Point your email client (like K-9 Mail) to localhost using the IMAP/SMTP ports and credentials generated by Hydroxide.

## Backgroundservice via Systemd

To ensure Hydroxide starts automatically and is accessible from other devices (e.g., your smartphone with K-9 Mail), follow these steps to set up the background service.

### 1. Configuration (Environment)
Define the IP address Hydroxide should listen on. Create the file /etc/default/hydroxide:

```bash
# Set to 0.0.0.0 to listen on all interfaces or a specific local IP
echo 'HYDROXIDE_LISTEN_IP=0.0.0.0' | sudo tee /etc/default/hydroxide
```

### 2. Systemd Unit File
Create the service file at /etc/systemd/system/hydroxide.service

```ini,TOML
[Unit]
Description=Hydroxide Proton Mail Bridge
After=network.target

[Service]
# IMPORTANT: Replace 'your-user' with your actual Linux username
User=your-user
Group=your-user

# Loads the IP address from the file created in step 1
EnvironmentFile=/etc/default/hydroxide

# Starts all bridge services (IMAP, SMTP, CardDAV)
ExecStart=/usr/local/bin/hydroxide \
  -imap-host ${HYDROXIDE_LISTEN_IP} \
  -smtp-host ${HYDROXIDE_LISTEN_IP} \
  -carddav-host ${HYDROXIDE_LISTEN_IP} \
  serve

Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```
### 3. Enable and Start
```bash
sudo systemctl daemon-reload
sudo systemctl enable --now hydroxide
```

### 4. Monitoring
You can monitor the bridge logs in real-time using:

```bash
sudo journalctl -u hydroxide -f
```

## Maintenance & Safety
Retention: This repository automatically keeps the last 5 versions to ensure storage limits are respected while providing a history for rollbacks.

Updates: Simply run your standard system updates (sudo apt upgrade or sudo dnf upgrade) to receive the latest Hydroxide version automatically.

## Credits
- Hydroxide CLI: Created by emersion.

- Packaging & CI/CD: Maintained via GitHub Actions.

- Hosting: Infrastructure provided by Cloudsmith (Open Source Hosting).
